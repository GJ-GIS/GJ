import{_ as i,c as a,ae as n,o as h}from"./chunks/framework.fHSmVqmP.js";const l="data:image/webp;base64,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",k="data:image/webp;base64,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",F=JSON.parse('{"title":"视图矩阵","description":"","frontmatter":{},"headers":[],"relativePath":"study/webgl/视图矩阵.md","filePath":"study/webgl/视图矩阵.md","lastUpdated":1731858933000}'),t={name:"study/webgl/视图矩阵.md"};function p(e,s,r,d,E,g){return h(),a("div",null,s[0]||(s[0]=[n('<h1 id="视图矩阵" tabindex="-1">视图矩阵 <a class="header-anchor" href="#视图矩阵" aria-label="Permalink to &quot;视图矩阵&quot;">​</a></h1><p>视图矩阵是将物体的世界坐标系转换到观察坐标系。</p><p>观察坐标系是通过相机来决定的。</p><h2 id="推导计算视图矩阵" tabindex="-1">推导计算视图矩阵 <a class="header-anchor" href="#推导计算视图矩阵" aria-label="Permalink to &quot;推导计算视图矩阵&quot;">​</a></h2><ol><li>要计算视图矩阵需要知道观察坐标系。</li><li>观察坐标系是通过相机来生成的。需要知道相机的位置（视点）， 相机观察的方向（视线），相机绕视线转动的方向（上方向）</li><li>通过将观察坐标系变换到世界坐标系的矩阵， 就可以通过矩阵的逆运算来获取物体的世界坐标系转换到观察坐标系。（根据相对运动）</li></ol><p><img src="'+l+'" alt="image.png"></p><h2 id="计算步骤" tabindex="-1">计算步骤 <a class="header-anchor" href="#计算步骤" aria-label="Permalink to &quot;计算步骤&quot;">​</a></h2><p>统一使用右手坐标系。</p><ol><li>建立观察坐标系.根据视点，视线，上方向，确定观察坐标系的三个方向（基线）。 <ol><li>视线确定 c 的方向（对应到世界坐标系的-z）</li><li>通过上方向和视线方向的叉乘，确定 a 的方向（对应到世界坐标系的 x）</li><li>通过 a 和 c 的叉乘确定 b 的方向.</li></ol></li></ol><p><img src="'+k+`" alt=""></p><ol start="2"><li><p>先位移：写出把视点e(ex,ey,ez) 对齐到 O点上的行主序位移矩阵mt.</p></li><li><p>写出把{o;x,y,-z} 对齐到{e;a,b,c} 的行主序旋转矩阵mr1. a,b,c是观察坐标系下的x&#39;, y&#39;, z&#39;的单位向量.</p><p>画个图通过数学来推导（OXY坐标系表示物体P的位置向量[a1,b1,0], 旋转到新的坐标系下表示这个P [a1&#39;, b1&#39;, 0]; a1&#39;, b1&#39; 是在新坐标系下a1和b1的表示。<a href="https://www.bilibili.com/video/BV1PY411F7ZY/?spm_id_from=333.337.search-card.all.click&amp;vd_source=de6b53ea78e5fb4af68f4d3967003de1" target="_blank" rel="noreferrer">数学推导视频</a></p><ol><li>把视线c(cx,cy,cz) 旋转到-z 轴上</li><li>把上方向b(bx,by,bz) 旋转到y 轴上</li><li>把c与b的垂线a(ax,ay,az) 旋转到x 轴上</li><li>把a,b,-c（都是单位向量）的x 分量写入mr1的第1行；把a,b,-c的y 分量写入mr1的第2行；把a,b,-c的z 分量写入mr1的第3行；（分解OXYZ的每个xyz的单位向量到新的坐标系下）</li></ol></li><li><p>计算mr1的逆矩阵mr2。因为正交旋转矩阵的逆矩阵就是其转置矩阵，所以mr2就是mr1的转置矩阵。</p></li><li><p>视图矩阵 = mr2*mt</p></li></ol><h2 id="代码实现" tabindex="-1">代码实现 <a class="header-anchor" href="#代码实现" aria-label="Permalink to &quot;代码实现&quot;">​</a></h2><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getViewMatrix</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">t</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">u</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  //基向量c，视线</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> c</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Vector3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">subVectors</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(e, t).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">normalize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  //基向量a，视线和上方向的垂线</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> a</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Vector3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">crossVectors</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(u, c).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">normalize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  //基向量b，修正上方向</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> b</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Vector3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">crossVectors</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(c, a).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">normalize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  //正交旋转矩阵</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> mr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Matrix4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">a, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">b, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">c.x, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">c.y, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">c.z, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  //位移矩阵</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> mt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Matrix4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">e.x, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">e.y, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">e.z, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> mr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">multiply</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(mt).elements</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div>`,13)]))}const A=i(t,[["render",p]]);export{F as __pageData,A as default};
