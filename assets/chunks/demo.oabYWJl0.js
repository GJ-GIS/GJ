var G=Object.defineProperty;var P=(m,n,a)=>n in m?G(m,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):m[n]=a;var v=(m,n,a)=>P(m,typeof n!="symbol"?n+"":n,a);import{_ as k,d as x}from"./cesium-view.vue_vue_type_script_setup_true_lang.DZzzYZYn.js";import*as o from"/GJ/cesiumStatic/index.js";import{d as B,v as T,at as b,o as I,b as S,w as L,j as _}from"./framework.BSn6qPJ2.js";import"./theme.aQ9DyiDZ.js";const O=B({__name:"demo",setup(m){class n{constructor(e){v(this,"viewer");v(this,"data");this.viewer=e.viewer,this.data=this.generateGridData(.5,.5,80,150,30,50),console.log("%c this.data: ","background-color: #3756d4; padding: 4px 8px; border-radius: 2px; font-size: 14px; color: #fff; font-weight: 700;",this.data),this.customPrimitive()}generateGridData(e,t,c,l,g,y){const u={lon1:c,lon2:l,lat1:g,lat2:y,dx:e,dy:t,nx:(l-c)/e,ny:(y-g)/t},d=[];for(let f=0;f<u.ny;f++)for(let h=0;h<u.nx;h++)d.push(Math.random()*60);return{header:u,data:d}}makeColor(e){let t;return e<10?t=[1,0,0,1]:e<20?t=[1,1,0,1]:e<30?t=[0,1,0,1]:e<40?t=[0,1,1,1]:e<50?t=[0,0,1,1]:t=[1,0,1,1],t}customGeometry(){const{lon1:e,lat1:t,nx:c,ny:l,dx:g,dy:y}=this.data.header;function u(r,s){const i=o.Cartesian3.fromDegrees(e+s*g,t+r*y,0);return[i.x,i.y,i.z]}const d=[],f=[],h=[],C=this.data.data;for(let r=0;r<l;r++)for(let s=0;s<c;s++){const i=r*c+s,D=C[i],w=(r+1)*c+s;d.push(...u(r,s)),f.push(...this.makeColor(D)),s<c-1&&r<l-1&&h.push(i,w,i+1,i+1,w,w+1)}const A=o.BoundingSphere.fromVertices(d);return console.log("%c positions: ","background-color: #3756d4; padding: 4px 8px; border-radius: 2px; font-size: 14px; color: #fff; font-weight: 700;",d),new o.Geometry({attributes:{position:new o.GeometryAttribute({componentDatatype:o.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:new Float64Array(d)}),color:new o.GeometryAttribute({componentDatatype:o.ComponentDatatype.FLOAT,componentsPerAttribute:4,values:new Float64Array(f)}),bitangent:void 0,tangent:void 0,normal:void 0,st:void 0},primitiveType:o.PrimitiveType.TRIANGLES,indices:new Uint16Array(h),boundingSphere:A})}customPrimitive(){this.viewer.scene.primitives.add(new o.Primitive({geometryInstances:new o.GeometryInstance({geometry:this.customGeometry()}),appearance:new o.PerInstanceColorAppearance({flat:!0}),compressVertices:!1,asynchronous:!1}))}}T(()=>{console.log("Cesium",o);const p=b(x);new n({viewer:p}),a()});const a=()=>{const p=b(x),e=4e5,t=o.Cartesian3.fromDegrees(116.39,39.9,e*.5);p.camera.flyToBoundingSphere(new o.BoundingSphere(t,e))};return(p,e)=>(I(),S(k,null,{default:L(()=>[_("div",{class:"flex gap-4"},[_("div",{class:"da-btn da-btn-primary da-btn-sm mt-4",onClick:a},"定位飞行")])]),_:1}))}});export{O as default};
