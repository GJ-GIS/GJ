var C=Object.defineProperty;var g=(t,r,a)=>r in t?C(t,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[r]=a;var c=(t,r,a)=>g(t,typeof r!="symbol"?r+"":r,a);import{_ as v,d as b}from"./cesium-view.vue_vue_type_script_setup_true_lang.DB8O3Ft0.js";import*as o from"/GJ/cesiumStatic/index.js";import{d as y,D as M,v as P,at as S,o as k,b as B,w as L,j as f,k as p}from"./framework.BSn6qPJ2.js";import"./theme.Bcjxkfh6.js";const O={class:"flex gap-4"},T=y({__name:"demo",setup(t){const r=M();class a{constructor(e){c(this,"_drawCommand",null);c(this,"_modelMatrix");c(this,"show",!0);this._modelMatrix=e.modelMatrix}_createCommand(e){const d=this._modelMatrix,l=o.BoxGeometry.fromDimensions({vertexFormat:o.VertexFormat.POSITION_AND_COLOR,dimensions:new o.Cartesian3(1,1,1)}),i=o.BoxGeometry.createGeometry(l);console.log("%c geometry: ","background-color: #3756d4; padding: 4px 8px; border-radius: 2px; font-size: 14px; color: #fff; font-weight: 700;",i);const n=o.GeometryPipeline.createAttributeLocations(i);console.log("%c attributeLocations: ","background-color: #3756d4; padding: 4px 8px; border-radius: 2px; font-size: 14px; color: #fff; font-weight: 700;",n);const m=o.VertexArray.fromGeometry({context:e,geometry:i,attributeLocations:n}),x=o.ShaderProgram.fromCache({context:e,vertexShaderSource:`
        in vec3 position;
        void main() {
          gl_Position = czm_projection  * czm_modelView * vec4( position , 1. );
        }
      `,fragmentShaderSource:`
        uniform vec3 myColor;
        void main() {
          out_FragColor = vec4(myColor, 1.);
        }
      `,attributeLocations:n}),h={myColor:()=>o.Color.ROYALBLUE},_=o.RenderState.fromCache({cull:{enabled:!1},depthTest:{enabled:!1}}),w=new o.DrawCommand({modelMatrix:d,vertexArray:m,shaderProgram:x,uniformMap:h,renderState:_,pass:o.Pass.OPAQUE});this._drawCommand=w}update(e){this.show&&(this._drawCommand||this._createCommand(e.context),o.defined(this._drawCommand)&&e.commandList.push(this._drawCommand))}isDestroyed(){return!1}destroy(){return o.defined(this._drawCommand)&&(this._drawCommand.shaderProgram=this._drawCommand.shaderProgram&&this._drawCommand.shaderProgram.destroy()),o.destroyObject(this)}}P(()=>{const s=u();r.value=s});const u=()=>{const s=S(b),e=1e5,d=o.Cartesian3.fromDegrees(116.39,39.9,.5*e),l=o.Transforms.eastNorthUpToFixedFrame(d),i=o.Matrix4.fromScale(new o.Cartesian3(e,e,e)),n=o.Matrix4.multiply(l,i,new o.Matrix4),m=new a({modelMatrix:n});return s.scene.primitives.add(m),s.camera.flyToBoundingSphere(new o.BoundingSphere(d,1e5)),m};return(s,e)=>(k(),B(v,null,{default:L(()=>[f("div",O,[f("div",{class:"da-btn da-btn-accent",onClick:e[0]||(e[0]=()=>{console.log("%c primitiveRef: ","background-color: #3756d4; padding: 4px 8px; border-radius: 2px; font-size: 14px; color: #fff; font-weight: 700;",p(r))})}," 打印Primitive "),f("div",{class:"da-btn da-btn-square da-btn-primary",onClick:e[1]||(e[1]=()=>{p(r).show=!p(r).show})}," 隐藏 ")])]),_:1}))}});export{T as default};
